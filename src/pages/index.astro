---
import Layout from "../layouts/Layout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const projects = (await getCollection("projects")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

const featuredProject = projects[0];
const latestPosts = posts.slice(0, 3);
---

<Layout title="Marcel Maatkamp | Portfolio">
	<!-- Hero Section -->
	<section class="hero">
		<div class="container">
			<h1 class="hero-title">
				ðŸ‘‹ Hi, I'm <span class="text-gradient">Marcel Maatkamp</span>!
			</h1>
			<p class="hero-subtitle">
				Software & Android Developer | Data Engineer | MLOps
			</p>
			<div class="hero-description card">
				<p>
					Building robust data pipelines, scalable software, and
					machine learning operations. Currently diving deep into <strong
						>Data Science</strong
					>, <strong>Android Development</strong>, and <strong
						>Cloud-native architectures</strong
					> to make the stack even more awesome!
				</p>
			</div>
			<div class="hero-actions">
				<a href="/portfolio" class="btn">View Portfolio</a>
				<a href="mailto:m.maatkamp@gmail.com" class="btn btn-secondary"
					>Get in Touch</a
				>
			</div>
		</div>
	</section>

	<!-- Tech Stack Section -->
	<section class="section tech-stack">
		<div class="container">
			<h2 class="section-title">Professional Expertise</h2>

			<div class="tech-categories">
				<!-- Infrastructure & MLOps -->
				<div class="category-group">
					<h3>Infrastructure & MLOps</h3>
					<div class="tech-grid">
						{
							[
								{ name: "Kubernetes", icon: "â˜¸ï¸" },
								{ name: "Docker", icon: "ðŸ³" },
								{ name: "Terraform", icon: "ðŸ—ï¸" },
								{ name: "Prometheus", icon: "ðŸ”¥" },
								{ name: "Grafana", icon: "ðŸ“ˆ" },
								{ name: "GitHub Actions", icon: "ðŸš€" },
								{ name: "GitLab CI", icon: "ðŸ¦Š" },
								{ name: "MinIO", icon: "ðŸ“¦" },
							].map((tech) => (
								<div class="tech-item card">
									<span class="tech-icon">{tech.icon}</span>
									<span class="tech-name">{tech.name}</span>
								</div>
							))
						}
					</div>
				</div>

				<!-- Data Engineering & Analytics -->
				<div class="category-group">
					<h3>Data Engineering & Analytics</h3>
					<div class="tech-grid">
						{
							[
								{ name: "Kafka", icon: "âš¡" },
								{ name: "DBT", icon: "ðŸ”¨" },
								{ name: "Postgres", icon: "ðŸ˜" },
								{ name: "MongoDB", icon: "ðŸƒ" },
								{ name: "Materialized", icon: "ðŸ”®" },
								{ name: "Jupyter", icon: "ðŸ““" },
								{ name: "Metabase", icon: "ðŸ“Š" },
								{ name: "RabbitMQ", icon: "ðŸ‡" },
							].map((tech) => (
								<div class="tech-item card">
									<span class="tech-icon">{tech.icon}</span>
									<span class="tech-name">{tech.name}</span>
								</div>
							))
						}
					</div>
				</div>

				<!-- Software & App Development -->
				<div class="category-group">
					<h3>Software & App Development</h3>
					<div class="tech-grid">
						{
							[
								{ name: "Python", icon: "ðŸ" },
								{ name: "Android", icon: "ðŸ¤–" },
								{ name: "Spring Boot", icon: "ðŸŒ±" },
								{ name: "TypeScript", icon: "ðŸŸ¦" },
								{ name: "Directus", icon: "ðŸ°" },
								{ name: "Liquibase", icon: "ðŸ’§" },
							].map((tech) => (
								<div class="tech-item card">
									<span class="tech-icon">{tech.icon}</span>
									<span class="tech-name">{tech.name}</span>
								</div>
							))
						}
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Featured Project -->
	{
		featuredProject && (
			<section class="section">
				<div class="container">
					<h2 class="section-title">Featured Project</h2>
					<div class="featured-project card">
						<div class="project-content">
							<h3>{featuredProject.data.title}</h3>
							<p>{featuredProject.data.description}</p>
							<div class="tags">
								{featuredProject.data.tags?.map(
									(tag: string) => (
										<span class="tag">{tag}</span>
									)
								)}
							</div>
							<a
								href={featuredProject.data.link}
								class="btn"
								target="_blank"
							>
								View Project
							</a>
						</div>
						{featuredProject.data.heroImage && (
							<div class="project-image">
								<img
									src={featuredProject.data.heroImage}
									alt={featuredProject.data.title}
								/>
							</div>
						)}
					</div>
				</div>
			</section>
		)
	}

	<!-- Latest Posts -->
	<section class="section">
		<div class="container">
			<h2 class="section-title">Latest from the Blog</h2>
			<div class="post-grid">
				{
					latestPosts.map((post) => (
						<a href={`/blog/${post.id}`} class="post-card card">
							<h3>{post.data.title}</h3>
							<time datetime={post.data.pubDate.toISOString()}>
								{post.data.pubDate.toLocaleDateString("en-us", {
									year: "numeric",
									month: "short",
									day: "numeric",
								})}
							</time>
							<p>{post.data.description}</p>
						</a>
					))
				}
			</div>
		</div>
	</section>
</Layout>

<style>
	.hero {
		padding: var(--space-16) 0;
		text-align: center;
		display: flex;
		flex-direction: column;
		align-items: center;
		gap: var(--space-8);
	}

	.hero-title {
		font-size: 4rem;
		margin-bottom: var(--space-2);
	}

	.hero-subtitle {
		font-size: 1.8rem;
		font-weight: 500;
		color: var(--color-secondary);
		margin-bottom: var(--space-4);
		letter-spacing: 0.05em;
	}

	.hero-description {
		max-width: 800px;
		margin: 0 auto var(--space-8);
		font-size: 1.2rem;
		line-height: 1.8;
		color: var(--color-text-muted);
	}

	.hero-description strong {
		color: var(--color-accent);
	}

	.hero-actions {
		display: flex;
		gap: var(--space-4);
		justify-content: center;
	}

	.tech-categories {
		display: flex;
		flex-direction: column;
		gap: var(--space-12);
	}

	.category-group h3 {
		font-size: 1.5rem;
		margin-bottom: var(--space-6);
		color: var(--color-primary);
		text-align: left;
		border-left: 4px solid var(--color-primary);
		padding-left: var(--space-4);
	}

	.tech-grid {
		display: grid;
		grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
		gap: var(--space-4);
	}

	.tech-item {
		display: flex;
		flex-direction: column;
		align-items: center;
		padding: var(--space-4);
		text-align: center;
		gap: var(--space-2);
		transition: transform var(--transition-fast),
			border-color var(--transition-fast);
	}

	.tech-item:hover {
		transform: translateY(-5px);
		border-color: var(--color-secondary);
	}

	.tech-icon {
		font-size: 2rem;
	}

	.tech-name {
		font-size: 0.9rem;
		font-weight: 600;
		color: var(--color-text);
	}

	.btn-secondary {
		background-color: var(--color-surface);
		border: 1px solid var(--color-border);
		color: var(--color-text);
	}

	.btn-secondary:hover {
		border-color: var(--color-primary);
		background-color: var(--color-surface-hover);
	}

	.section {
		padding: var(--space-12) 0;
	}

	.section-title {
		margin-bottom: var(--space-8);
		text-align: center;
	}

	.featured-project {
		display: grid;
		grid-template-columns: 1fr 1fr;
		gap: var(--space-8);
		align-items: center;
	}

	.project-content {
		display: flex;
		flex-direction: column;
		gap: var(--space-4);
	}

	.tags {
		display: flex;
		gap: var(--space-2);
		flex-wrap: wrap;
	}

	.tag {
		background-color: var(--color-surface-hover);
		padding: 2px 8px;
		border-radius: var(--radius-full);
		font-size: 0.8rem;
		color: var(--color-text-muted);
	}

	.post-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		gap: var(--space-6);
	}

	.post-card {
		text-decoration: none;
		color: var(--color-text);
		display: flex;
		flex-direction: column;
		gap: var(--space-2);
	}

	.post-card h3 {
		color: var(--color-primary);
		margin: 0;
	}

	.post-card time {
		font-size: 0.85rem;
		color: var(--color-text-muted);
	}

	.post-card:hover h3 {
		color: var(--color-primary-hover);
	}

	@media (max-width: 768px) {
		.hero-title {
			font-size: 2.5rem;
		}

		.featured-project {
			grid-template-columns: 1fr;
		}
	}
</style>
